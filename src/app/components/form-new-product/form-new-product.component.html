<div class="w-full">
    <div class="grid grid-cols-1 gap-4">
        <div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="marca_producto" class="block text-sm font-medium text-gray-700">Marca</label>
                    <select id="brands" name="brand" required 
                            [(ngModel)]="selectedBrand" (change)="onBrandChange()"
                            class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 bg-white focus:ring-2 focus:ring-orange-500">
                        <option [ngValue]="null" disabled hidden>Elige marca</option>
                        <option *ngFor="let brand of brands" [ngValue]="brand">{{ brand.nombre }}</option>
                    </select>
                </div>

                <div *ngIf="isSelectedBrand && models.length">
                    <label for="modelSearch" class="block text-sm font-medium text-gray-700">Modelo</label>
                    <div class="relative mt-1">
                        <input [(ngModel)]="selectedModelName"
                                     (input)="onSearchProductModel($event)"
                                     type="text" id="modelSearch" name="modelSearch" required
                                     class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500"
                                     placeholder="Buscar Modelo...">

                        <ul *ngIf="filteredModels.length" class="absolute left-0 right-0 z-50 mt-1 bg-white border border-gray-200 rounded-lg shadow max-h-48 overflow-y-auto">
                            <li *ngFor="let model of filteredModels" (click)="selectModel(model)" class="px-3 py-2 hover:bg-gray-50 cursor-pointer">{{ model.nombre }}</li>
                        </ul>
                    </div>
                </div>

                <div *ngIf="selectedBrand!.nombre === 'Apple'" class="md:col-span-2">
                    <label for="serialNumber" class="block text-sm font-medium text-gray-700">Nº de serie</label>
                    <input [(ngModel)]="serialNumber" type="text" id="serialNumber" name="serialNumber" required
                                 class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500" placeholder="Introducir SN">
                </div>
            </div>
        </div>

        <div>
            <h2 class="text-base font-semibold text-gray-900">Información Opcional</h2>

            <div *ngIf="selectedModelName" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="cpuSearch" class="block text-sm font-medium text-gray-700">CPU</label>
                    <div class="relative mt-1">
                        <input [(ngModel)]="selectedCPUModel" (input)="onSearchProductCPU($event)" type="text" id="cpuSearch" name="cpuSearch" required
                                     class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500" placeholder="Buscar CPU...">

                        <ul *ngIf="filteredCPUs.length" class="absolute left-0 right-0 z-50 mt-1 bg-white border border-gray-200 rounded-lg shadow max-h-48 overflow-y-auto">
                            <li *ngFor="let cpu of filteredCPUs" (click)="selectCPU(cpu)" class="px-3 py-2 hover:bg-gray-50 cursor-pointer">{{ cpu.serie }}</li>
                        </ul>
                    </div>
                </div>

                <div>
                    <label for="ram_producto" class="block text-sm font-medium text-gray-700">RAM</label>
                    <select id="product-ram" name="product-ram" required [(ngModel)]="selectedProductRAM" class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                        <option value="" disabled hidden>Elige RAM</option>
                        <option *ngFor="let ram of rams" [value]="ram">{{ ram.cantidad }} GB</option>
                    </select>
                </div>

                <div>
                    <label for="ssd_producto" class="block text-sm font-medium text-gray-700">SSD</label>
                    <select id="product-ssd" name="product-ssd" required [(ngModel)]="selectedProductSSD" class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                        <option value="" disabled hidden>Elige SSD</option>
                        <option *ngFor="let ssd of ssds" [value]="ssd">{{ ssd.capacidad }} GB</option>
                    </select>
                </div>

                <div>
                    <label for="hdd_producto" class="block text-sm font-medium text-gray-700">HDD</label>
                    <select id="product-hhd" name="product-hhd" required [(ngModel)]="selectedProductHHD" class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                        <option value="" disabled hidden>Elige HHD</option>
                        <option *ngFor="let hhd of hhds" [value]="hhd">{{ hhd.capacidad }} GB</option>
                    </select>
                </div>

                <div>
                    <label for="grafica_producto" class="block text-sm font-medium text-gray-700">Tarjeta gráfica</label>
                    <input type="text" id="grafica_producto" name="grafica_producto" placeholder="Buscar la gráfica" required class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                </div>

                <div>
                    <label for="pulgadas_producto" class="block text-sm font-medium text-gray-700">Pulgadas</label>
                    <select id="inches" name="inches" required [(ngModel)]="selectedProductInches" class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                        <option value="" disabled hidden>Elige Pulgadas</option>
                        <option *ngFor="let inch of inches" [value]="inch">{{ inch.tamanyo }}</option>
                    </select>
                </div>

                <div>
                    <label for="peso_producto" class="block text-sm font-medium text-gray-700">Resolución</label>
                    <input type="text" id="peso_producto" name="peso_producto" placeholder="Introducir peso" required class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                </div>

                <div>
                    <label for="so_producto" class="block text-sm font-medium text-gray-700">SO</label>
                    <select id="sos" name="so" required [(ngModel)]="selectedSOName" class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2">
                        <option value="" disabled hidden>Elige SO</option>
                        <option *ngFor="let so of sos" [value]="so">{{ so.nombre }}</option>
                    </select>
                    <div *ngIf="selectedSO === true" class="text-red-600 text-sm mt-1">El SO es obligatoria.</div>
                </div>
            </div>
        </div>
    </div>
</div>