<div class="w-full p-4">
  <div class="w-full">
    <div class="w-full">
      <!-- Header con información de tenant -->
      <div class="flex justify-between items-center mb-4">
        <h1 class="text-2xl font-bold text-gray-900 mb-0">
          🏠 Dashboard 
          <span *ngIf="currentTenant && !isSuperAdmin" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 ml-2">
            {{currentTenant.name}}
          </span>
          <span *ngIf="isSuperAdmin" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 ml-2">
            Super Admin
          </span>
        </h1>
        <div *ngIf="currentTenant" class="text-right">
          <small class="text-gray-500 block">Dominio: {{currentTenant.domain}}</small>
          <small class="text-gray-500 block">Tenant ID: {{currentTenant.id}}</small>
        </div>
      </div>
      
      <!-- Estado de conexión -->
      <div class="rounded-lg p-4 mb-4" 
           [ngClass]="currentTenant ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200'" 
           role="alert">
        <div class="font-semibold text-gray-900">Estado: <span [ngClass]="currentTenant ? 'text-green-700' : 'text-yellow-700'">{{connectionStatus}}</span></div>
        <div *ngIf="currentTenant && !isSuperAdmin" class="mt-2">
          <div class="font-semibold text-gray-900 mb-2">Módulos disponibles:</div>
          <div class="flex flex-wrap gap-1">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800" *ngIf="currentTenant.allowedModules.facturas">Facturas</span>
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800" *ngIf="currentTenant.allowedModules.presupuestos">Presupuestos</span> 
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800" *ngIf="currentTenant.allowedModules.servicios">Servicios</span>
          <span class="badge bg-warning ms-1" *ngIf="currentTenant.allowedModules.material">Material</span>
        </div>
      </div>

      <!-- Estadísticas básicas -->
      <div class="row mb-4">
        <div class="col-md-6">
          <div class="card bg-primary text-white">
            <div class="card-body">
              <h5 class="card-title">🏢 Empresas</h5>
              <h2 class="mb-0">{{companies.length}}</h2>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="card bg-success text-white">
            <div class="card-body">
              <h5 class="card-title">👥 Usuarios</h5>
              <h2 class="mb-0">{{users.length}}</h2>
            </div>
          </div>
        </div>
      </div>

      <!-- Acciones rápidas -->
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">🔧 Acciones Rápidas</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4 mb-2">
              <a routerLink="/clientes" class="btn btn-outline-primary w-100">
                <i class="bi bi-person-fill"></i> Ver Clientes
              </a>
            </div>
            <div class="col-md-4 mb-2">
              <a routerLink="/test-multitenant" class="btn btn-outline-info w-100">
                <i class="bi bi-database-gear"></i> Pruebas Base de Datos
              </a>
            </div>
            <div class="col-md-4 mb-2">
              <button class="btn btn-outline-success w-100" (click)="loadData()">
                <i class="bi bi-arrow-clockwise"></i> Cargar Datos Demo
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista simple de empresas -->
      <div class="card mt-3" *ngIf="companies.length > 0">
        <div class="card-header">
          <h5 class="mb-0">📋 Lista de Empresas</h5>
        </div>
        <div class="card-body">
          <div class="list-group">
            <div class="list-group-item" *ngFor="let company of companies">
              <strong>{{company.name}}</strong>
              <small class="text-muted ms-2" *ngIf="company.created_at">
                - Creada: {{company.created_at | date:'short'}}
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
