<div class="h-full flex flex-col p-6 space-y-6">
    <div *ngIf="!isEmbedded" class="flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Calendario</h1>
            <p class="text-gray-500 dark:text-gray-400">Gestiona tus citas y bloqueos</p>
        </div>

        <!-- View Options -->
        <div
            class="flex items-center space-x-2 bg-white dark:bg-gray-800 p-1 rounded-md border border-gray-200 dark:border-gray-700">
            <span class="text-xs font-medium text-gray-500 pl-2">Colores:</span>
            <select [value]="colorMode()" (change)="colorMode.set($any($event.target).value)"
                class="text-sm bg-transparent border-none focus:ring-0 text-gray-700 dark:text-gray-200 cursor-pointer">
                <option value="status">Por Estado</option>
                <option value="service">Por Servicio</option>
                <option value="professional">Por Profesional</option>
            </select>
        </div>
    </div>

    <div class="flex-1 min-h-0 relative">
        <app-calendar [events]="events()" [startHour]="config().calendar_start_hour ?? 8"
            [endHour]="config().calendar_end_hour ?? 22" [resources]="resources()" [showAddButton]="true"
            [showBlockButton]="true" [colorMode]="colorMode()" (viewChange)="onViewChange($event)"
            (addEvent)="onAddEvent()" (blockTime)="onBlockTime()" (eventClick)="onEventClick($event)"
            (dateClick)="onDateClick($event)" (eventDrop)="onEventDrop($event)" (eventResize)="onEventResize($event)"
            (eventAction)="onEventAction($event)">
        </app-calendar>

        <app-calendar-action-modal [isOpen]="isModalOpen()" [initialStartDate]="selectedDate()"
            [services]="availableServices()" [clients]="availableClients()" (closeModal)="isModalOpen.set(false)"
            (saveAction)="handleModalSave($event)" (deleteAction)="handleModalDelete($event)">
        </app-calendar-action-modal>
    </div>
</div>