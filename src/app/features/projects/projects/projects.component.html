<div class="h-full flex flex-col">
    <!-- Header with View Switcher -->
    <div
        class="flex items-center justify-between px-6 py-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Proyectos</h1>

        <div class="flex items-center space-x-3">
            <!-- View Switcher -->
            <div class="flex bg-gray-800/50 p-1 rounded-lg">
                <button (click)="toggleView('kanban')" [class.bg-gray-700]="currentView === 'kanban'"
                    [class.text-white]="currentView === 'kanban'"
                    class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400 hover:text-white transition-all">
                    Tablero
                </button>
                <button (click)="toggleView('timeline')" [class.bg-gray-700]="currentView === 'timeline'"
                    [class.text-white]="currentView === 'timeline'"
                    class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400 hover:text-white transition-all">
                    Cronograma
                </button>
                <button (click)="toggleView('list')" [class.bg-gray-700]="currentView === 'list'"
                    [class.text-white]="currentView === 'list'"
                    class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400 hover:text-white transition-all">
                    Tabla
                </button>
            </div>

            <!-- Archived Toggle -->
            <button (click)="toggleArchived()" [class.bg-orange-100]="showArchived"
                [class.text-orange-700]="showArchived" [class.border-orange-200]="showArchived"
                class="px-3 py-1.5 text-xs font-medium rounded-md border border-gray-200 dark:border-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-all flex items-center space-x-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
                <span class="hidden sm:inline">{{ showArchived ? 'Ocultar Papelera' : 'Papelera' }}</span>
            </button>
        </div>
    </div>

    <!-- Content Area -->
    <div class="flex-1 overflow-hidden relative">
        <app-kanban-board *ngIf="currentView === 'kanban'" class="h-full block"></app-kanban-board>

        <app-timeline-view *ngIf="currentView === 'timeline'" [projects]="projects"
            (projectClick)="openEditProject($event)" class="h-full block overflow-auto bg-gray-50 dark:bg-gray-900">
        </app-timeline-view>

        <app-list-view *ngIf="currentView === 'list'" [projects]="projects" [stages]="stages"
            (projectClick)="openEditProject($event)" class="h-full block overflow-hidden">
        </app-list-view>
    </div>

    <!-- Project Dialog (Shared/Timeline context) -->
    <app-project-dialog *ngIf="isProjectDialogVisible" [visible]="isProjectDialogVisible" [project]="selectedProject"
        [stages]="stages" (close)="onProjectDialogClose($event)">
    </app-project-dialog>
</div>