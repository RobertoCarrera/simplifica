<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Simplifica CRM - Premium Experience</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Simplifica CRM">

  <link rel="manifest" href="manifest.json">

  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="favicon.ico">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" 
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" 
        crossorigin="anonymous" referrerpolicy="no-referrer">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <meta name="theme-color" content="#6366f1">
  <meta name="msapplication-TileColor" content="#6366f1">

  <meta name="description" content="Sistema CRM con experiencia de usuario premium y funcionalidades avanzadas">
  <meta name="keywords" content="CRM, gestiÃ³n, clientes, tickets, premium">
  <meta name="author" content="Simplifica Team">

  <meta property="og:title" content="Simplifica CRM - Premium Experience">
  <meta property="og:description" content="Sistema CRM con experiencia de usuario premium">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/">
  <meta property="og:image" content="/favicon.ico">
</head>
<body>
  <script>
    // Early console proxy: suppress log/info/debug while preserving warn/error
    (function(){
      try {
        var origConsole = (typeof console !== 'undefined') ? console : { };
        var handler = {
          get(target, prop) {
            if (prop === 'log' || prop === 'info' || prop === 'debug') {
              return function(){}; // no-op for noisy methods
            }
            // bind methods to original console to preserve context
            var v = target[prop];
            if (typeof v === 'function') return v.bind(target);
            return v;
          }
        };
        try {
          // Replace window.console with a Proxy so code that reads console.* sees the proxy
          window.console = new Proxy(origConsole, handler);
        } catch (e) {
          // Some environments disallow replacing console; try to patch methods directly
          try { window.console.log = function(){}; } catch(e){}
          try { window.console.info = function(){}; } catch(e){}
          try { window.console.debug = function(){}; } catch(e){}
        }

        // Wrap navigator.locks.request to avoid failures when locks cannot be acquired
        if (typeof navigator !== 'undefined' && navigator.locks && typeof navigator.locks.request === 'function') {
          try {
            const origRequest = navigator.locks.request.bind(navigator.locks);
            navigator.locks.request = function(name, options, callback) {
              try {
                const maybeCallback = (typeof options === 'function') ? options : callback;
                return origRequest(name, options, callback).catch(function(err){
                  // If lock acquisition fails, fall back to executing the callback without the lock
                  try { return Promise.resolve(maybeCallback()); } catch(e) { return Promise.reject(e); }
                });
              } catch (e) {
                try { const cb = (typeof options === 'function') ? options : callback; return Promise.resolve(cb()); } catch(err) { return Promise.reject(err); }
              }
            };
          } catch (e) {
            // ignore
          }
        }
      } catch (e) {
        // ignore shim errors
      }
      })();
      // Dynamic viewport height fix for iOS Safari & modern browsers
      (function viewportHeightFix(){
        function setVH(){
          try {
            var vh = window.visualViewport ? window.visualViewport.height : window.innerHeight;
            document.documentElement.style.setProperty('--dvh', vh + 'px');
          } catch(e) { /* ignore */ }
        }
        setVH();
        window.addEventListener('resize', setVH);
        if (window.visualViewport) {
          window.visualViewport.addEventListener('resize', setVH);
        }
      })();
      
      // Detect iOS and add class for specific styling
      (function detectIOS(){
        try {
          var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
          var isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                             window.navigator.standalone === true;
          
          if (isIOS) {
            document.body.classList.add('ios-device');
            if (isStandalone) {
              document.body.classList.add('ios-pwa');
            }
          }
        } catch(e) { /* ignore */ }
      })();
  </script>
  <app-root></app-root>  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('SW registered: ', registration);
          })
          .catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>
</body>
</html>